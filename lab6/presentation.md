---
## Front matter
lang: ru-RU
title: Лабораторная работа №6
author: |
	Шагабаев Д.А\inst{1}
institute: |
	\inst{1}RUDN University, Moscow, Russian Federation
date: 2021 Moscow, Russia

## Formatting
toc: false
slide_level: 2
theme: metropolis
header-includes: 
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
aspectratio: 43
section-titles: true
---

# Цели 

## Цель работы

Развить навыки администрирования ОС Linux. Получить первое практическое знакомство с технологией SELinux1 . Проверить работу SELinx на практике совместно с веб-сервером Apache.

# Ход выполнения работы

## Этапы 

1. Подготовка лабораторного стенда и методические рекомендации.
2. Порядок выполнения работы.


## Подготовка лабораторного стенда и методические рекомендации.

Установка Apache командой

В конфигурационном файле /etc/httpd/httpd.conf необходимо задать параметр ServerName

Также необходимо проследить, чтобы пакетный фильтр был отключён или в своей рабочей конфигурации позволял подключаться к 80-у и 81-у портам протокола tcp.

Запуск и проверка сервера.

## Порядок выполнения работы.

Найдите веб-сервер Apache в списке процессов, определите его контекст безопасности

 Посмотрите текущее состояние переключателей SELinux для Apache

Посмотрите статистику по политике с помощью команды seinfo, также определите множество пользователей, ролей, типов.

Определите тип файлов и поддиректорий, находящихся в директории /var/www

Создайте от имени суперпользователя html-файл /var/www/html/test.html

Проверьте контекст созданного вами файла.

Обратитесь к файлу через веб-сервер, введя в браузере адрес http://127.0.0.1/test.html. Убедитесь, что файл был успешно отображён

Изучите справку man httpd_selinux

## Порядок выполнения работы.

Измените контекст файла /var/www/html/test.html с httpd_sys_content_t на любой другой

Попробуйте ещё раз получить доступ к файлу через веб-сервер, введя в браузере адрес http://127.0.0.1/test.html.

Проанализируйте ситуацию. Почему файл не был отображён

Просмотрите log-файлы веб-сервера Apache. Также просмотрите системный лог-файл:

Попробуйте запустить веб-сервер Apache на прослушивание ТСР-порта 81

Проанализируйте лог-файлы

Выполните команду semanage port -a -t http_port_t -р tcp 81 После этого проверьте список портов командой semanage port -l | grep http_port_t Убедитесь, что порт 81 появился в списке.

Попробуйте запустить веб-сервер Apache ещё раз. Поняли ли вы, почему он сейчас запустился, а в предыдущем случае не смог?

Верните контекст httpd_sys_cоntent__t

Исправьте обратно конфигурационный файл apache, вернув Listen 80.

Удалите привязку http_port_t к 81 порту

Удалите файл /var/www/html/test.html: rm /var/www/html/test.html

# Вывод

Развили навыки администрирования ОС Linux. Получили первое практическое знакомство с технологией SELinux1 . Проверили работу SELinx на практике совместно с веб-сервером Apache.


## {.standout}

Спасибо за внимание!
